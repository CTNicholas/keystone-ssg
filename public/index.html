<html>
  <head>
    <title>Homepage</title>
    
	
</head>
  <body>
  <h1>index</h1>
  <div id="content">
  <a href="/docs"> link to docsss </a>
  <a href="/docs/isntaller"> link to isntaller </a>
  <br>
  <a href="//localhost:8080/docs">full (should work)</a>
  <br>
  <a href="docs">no slash (should work)</a>
  <br>
  <a href="//localhost/docs">no port (should fail)</a>
  
this is a test
	
	<h1> I have been imported!</h1>
	seems to be working greatsssssssssssssf
	
	<a href="https://google.co.uk">google link</a>

</div>
	
  <script>
if (document.readyState === 'interactive' || document.readyState === 'complete') {
  run()
} else {
  document.addEventListener('DOMContentLoaded', () => {
    run()
  })
}

function run () {
  watchLinks()
}

function linkClicked (event) {
  if (location.host === event.target.host) {
    event.preventDefault()
    getPage(event.target.getAttribute('href')).then(newPage => {
      document.open()
      document.write(newPage)
      document.close()
    })
  }
}

function watchLinks () {
  console.log('Watching links')
  const links = document.querySelectorAll('a')
  for (const link of links) {
    console.log('link', link)
    link.addEventListener('click', linkClicked)
  }
}

async function getPage (url) {
  try {
    return fetch(url)
      .then(response => response.text())
      .catch(() => { 
        console.log('CATCH')
        window.location.replace(url)
      })
  } catch (err) { 
    console.log(err)
    window.location(url)
  }
}
</script></body>
</html>